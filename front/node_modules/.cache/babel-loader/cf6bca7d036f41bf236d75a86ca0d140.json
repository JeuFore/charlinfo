{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jeufore/Documents/charlinfo/front/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';var Connection=/*#__PURE__*/function(_React$Component){_inherits(Connection,_React$Component);function Connection(props){var _this;_classCallCheck(this,Connection);_this=_possibleConstructorReturn(this,_getPrototypeOf(Connection).call(this,props));_this.state={register:\"responsive-register\",username:\"\",password:\"\",userError:\"\"};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.callAPI=_this.callAPI.bind(_assertThisInitialized(_this));return _this;}_createClass(Connection,[{key:\"handleInputChange\",value:function handleInputChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();this.callAPI();}},{key:\"callAPI\",value:function(){var _callAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('http://localhost:9000/user/login',{username:this.state.username,password:this.state.password});case 3:_ref=_context.sent;data=_ref.data;console.log(data);window.location.replace(\"/profile\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);this.setState({userError:_context.t0.response.data.text});case 12:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function callAPI(){return _callAPI.apply(this,arguments);}return callAPI;}()},{key:\"componentDidMount\",value:function componentDidMount(){document.title=\"Charlinfo | Connexion\";}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"d-flex justify-content-center mt-5\"},this.state.register===\"responsive-register\"&&React.createElement(\"form\",{className:\"p-4 m-5 login-component rainbow bg-success d-flex flex-column justify-content-center\",onSubmit:this.handleSubmit},React.createElement(\"h1\",{className:\"mb-3 text-center\"},\"Connexion\"),React.createElement(\"div\",{className:\"d-flex flex-column\"},React.createElement(\"input\",{type:\"username\",placeholder:\"Nom d'utilisateur\",onChange:this.handleInputChange,name:\"username\"}),React.createElement(\"input\",{type:\"password\",placeholder:\"Mot de passe\",onChange:this.handleInputChange,name:\"password\"})),React.createElement(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Se connecter\"}),React.createElement(\"label\",{className:\"responsive-register\"},\"Pas encore inscrit, \",React.createElement(\"a\",{href:\"#register\"},\"Go s'inscrire sur Charlinfo\"))),React.createElement(\"h1\",null,this.state.userError),React.createElement(\"form\",{className:\"p-4 m-5 login-component rainbow bg-success \".concat(this.state.register)},React.createElement(\"h1\",{className:\"mb-3 text-center\"},\"Inscription\"),React.createElement(\"div\",{className:\"d-flex flex-column\"},React.createElement(\"input\",{type:\"username\",placeholder:\"Nom d'utilisateur\"}),React.createElement(\"input\",{type:\"name\",placeholder:\"Nom\"}),React.createElement(\"input\",{type:\"name\",placeholder:\"Pr\\xE9nom\"}),React.createElement(\"select\",{className:\"form-control m-3 w-auto\"},React.createElement(\"option\",null,\"DUT Informatique\")),React.createElement(\"input\",{type:\"password\",placeholder:\"Mot de passe\"})),React.createElement(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Se connecter\"})));}}]);return Connection;}(React.Component);export default Connection;","map":{"version":3,"sources":["/Users/jeufore/Documents/charlinfo/front/src/components/user/Connection.jsx"],"names":["React","axios","Connection","props","state","register","username","password","userError","handleInputChange","bind","handleSubmit","callAPI","event","setState","target","name","value","preventDefault","post","data","console","log","window","location","replace","response","text","document","title","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\n\nclass Connection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            register: \"responsive-register\",\n            username: \"\",\n            password: \"\",\n            userError: \"\"\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.callAPI = this.callAPI.bind(this)\n    }\n\n    handleInputChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        this.callAPI();\n    }\n\n    async callAPI() {\n\n        try {\n            const { data } = await axios.post('http://localhost:9000/user/login', {\n                username: this.state.username,\n                password: this.state.password\n            })\n            console.log(data)\n            window.location.replace(\"/profile\")\n        } catch (error) {\n            this.setState({\n                userError: error.response.data.text\n            })\n        }\n    }\n\n    componentDidMount() {\n        document.title = `Charlinfo | Connexion`;\n    }\n    render() {\n        return (\n            <div className=\"d-flex justify-content-center mt-5\">\n                {this.state.register === \"responsive-register\" && (\n                    <form className=\"p-4 m-5 login-component rainbow bg-success d-flex flex-column justify-content-center\" onSubmit={this.handleSubmit}>\n                        <h1 className=\"mb-3 text-center\">Connexion</h1>\n                        <div className=\"d-flex flex-column\">\n                            <input type=\"username\" placeholder=\"Nom d'utilisateur\" onChange={this.handleInputChange} name=\"username\" />\n                            <input type=\"password\" placeholder=\"Mot de passe\" onChange={this.handleInputChange} name=\"password\" />\n                        </div>\n                        <input type=\"submit\" className=\"btn btn-primary\" value=\"Se connecter\" />\n                        <label className=\"responsive-register\">Pas encore inscrit, <a href=\"#register\" >Go s'inscrire sur Charlinfo</a></label>\n                    </form>\n                )}\n\n                <h1>{this.state.userError}</h1>\n\n                <form className={`p-4 m-5 login-component rainbow bg-success ${this.state.register}`}>\n                    <h1 className=\"mb-3 text-center\">Inscription</h1>\n                    <div className=\"d-flex flex-column\">\n                        <input type=\"username\" placeholder=\"Nom d'utilisateur\" />\n                        <input type=\"name\" placeholder=\"Nom\" />\n                        <input type=\"name\" placeholder=\"Prénom\" />\n                        <select className=\"form-control m-3 w-auto\">\n                            <option>DUT Informatique</option>\n                        </select>\n                        <input type=\"password\" placeholder=\"Mot de passe\" />\n                    </div>\n                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Se connecter\" />\n                </form>\n\n            </div>\n        )\n    }\n}\n\nexport default Connection"]},"metadata":{},"sourceType":"module"}